<%= @routine.name %>
<p>Run every <%= @today[@routine.day] %> from <%= @routine.starttime.strftime("%H:%M") %> to <%= @routine.endtime.strftime("%H:%M") %></p>

<% @recommendation_response.each_with_index do |recommendation, index| %>
  <% if recommendation.starttime.hour == @routine.starttime && @day == @slot %>
    <p><%= index + 1 %> You've already applied the best routine.</p>
  <% elsif recommendation.endtime.hour < recommendation.starttime.hour %>
    <p><%= index + 1 %> If you set your routine to begin at  <%= recommendation.starttime.strftime('%H:%M') %> today and end at <%= recommendation.endtime.strftime("%H:%M") %> tomorrow, a <%= @duration %> hour routine will save you €<%= @savings[index] %> per year.</p>
  <% else %>
    <p><%= index + 1 %> If you set your routine to begin on <%= @today[index] %> at <%= recommendation.starttime.strftime('%H:%M') %> and end at <%= recommendation.endtime.strftime("%H:%M") %>, a <%= @duration %> hour routine will save you €<%= @savings[index] %> per year.</p>
  <% end %>

  <%= simple_form_for @new_routine do |f| %>
    <%= f.hidden_field :cost, value: recommendation.cost %>
    <%= f.hidden_field :starttime, value: recommendation.starttime %>
    <%= f.hidden_field :endtime, value: recommendation.endtime %>
    <%= f.hidden_field :day, value: @weekdays.find_index(@today[index]) + 1 %>
    <%= f.hidden_field :name, value: @routine.name %>
    <%= f.hidden_field :lineage, value: @routine.lineage %>
    <%= f.hidden_field :user_appliance_id, value: @routine.user_appliance.id %>
    <%= f.hidden_field :request_origin, value: "recommender" %>
    <%= f.submit %>
  <% end %>

<% end %>


<%# <%= button_to 'Back to Appliance', user_appliances_path, method: :get, class: 'btn btn-primary' %>
